# JWT
정보를 암호화 시켜 JSON 형태에 담은 웹 토큰이다.
JWT는 사용자를 인증하거나, 데이터를 안전하게 전송하기 위해 사용된다.

JWT는 위변조 방지가 들어간 서버가 생성한 데이터라고 생각할 수 도 있다.

실생활 예시 : 규칙에 따라 인증서가 기입된 계약서(JWT)
계약을 할때 계약 제안자(Issuer)는 계약 내용에 따라 규칙을 적용하여 인증서(signature)를 기입한다. 인증서가 있는 계약서를 통해 누구라도 상관없이 계약자임을 인증(독립적)할 수 있다. 하지만 계약서의 내용을 위조하여 인증서와 매칭되지 않는다면 계약 제안자는 위조된 계약서로 보고 계약자임을 인증할 수 없다.
## 특징
1. 토큰 자체에 데이터를 포함하고 있다.
2. 토큰의 내용을 쉽게 해독할 수 있다.
3. 시그니처를 사용해 데이터 위변조를 막는다.
### 장점
1. 서명을 통해 데이터의 위변조를 막는다
2. 토큰 자체에 데이터를 가지고 있어 인증에 저장소가 필요하지 않아 서버 부담이 없으며, 확장성도 뛰어나다
3. 토큰을 통해 독립적으로 서버에 인증이 가능하고, 독립적이기 때문에 토큰을 넘겨 상대방에게 권한 위임도 가능해 OAuth에 사용된다.
### 단점
1. 토큰 자체에 데이터를 담고 있고 쉽게 복호화가 가능해 민감한 정보를 담을 시 위험할 수 있다.
2. 토큰은 클라이언트에서 담기 때문에 토큰이 탈취되어도 조취를 취할 수 없고, 탈취자는 토큰을 이용해 사용자인척 속일 수 있다.
3. 토큰의 길이가 길어지면 네트워크에 부담을 줄 수 있다.
##### Access Token, Refresh Token
유저인증에 JWT 엑세스 토큰을 사용할때 토큰이 탈취되면 조치를 취하지 못하기때문에 토큰 자체에 유효기간을 짧게 설정한다, 하지만 유효기간이 짧으면 엑세스 토큰을 재발급해야하는데 유저입장은 재 로그인이 번거롭기 때문에 Refresh Token을 통해 엑세스 토큰을 재발급하는 방법을 주로 사용한다.
Refresh Token은 보통 유저 데이터베이스에 기록된다
## 구조
![[Pasted image 20250227235303.png]]
JWT은 헤더, 페이로드, 서명으로 구성된다.
### 헤더
헤더는 alg, typ로 구성되었다
alg : 서명에 사용할 해시 알고리즘
typ : 토큰 타입
### 페이로드
페이로드는 토큰에 담을 정보를 저장한다.

페이로드의 Claim 종류로는 Registered claims, Public claims, Private claim가 있다
#### Registered cliams
미리 정의된 클레임을 의미한다
iss : 발행자
exp : 만료 시간
sub : 제목
iat : 발행 시간
jti : JWI ID
#### Public claims
공개용 정보를 담는 클레임. 사용자가 정의 가능
#### Private claims
개인 정보를 담는 클레임. 사용자가 정의 가능
### 서명
서명을 통해 해당 토큰이 정식으로 발급 된 토큰인지, 위변조가 없는지를 확인 할 수 있다.

서명은 헤더, 내용, 토큰 생성 비밀번호를 합쳐 헤더에 기록된 해시 알고리즘을 통해 생성한다
![[Pasted image 20250228004816.png]]
참고 및 자료 출처
https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-JWTjson-web-token-%EB%9E%80-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC#jwt_%EA%B5%AC%EC%A1%B0